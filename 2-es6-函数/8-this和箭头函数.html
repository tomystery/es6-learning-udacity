<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    
</body>
<script>
    //1.普通函数中this示例

   /*  // constructor
        function IceCream() {
            this.scoops = 0;
        }

        // adds scoop to ice cream
        IceCream.prototype.addScoop = function () {
            setTimeout(function () {
                this.scoops++;
                console.log('scoop added!');
            }, 500);
        };

        const dessert = new IceCream();
        dessert.addScoop();//scoop added!
        console.log(dessert.scoops);//0
        console.log(scoops); */
      
       
       //2.解决这个问题的方法之一是使用闭包：

       // constructor
        function IceCream() {
            this.scoops = 0;
        }

        // adds scoop to ice cream
        IceCream.prototype.addScoop = function () {
            const cone = this; // sets `this` to the `cone` variable
            setTimeout(function () {
                cone.scoops++; // references the `cone` variable
                console.log('scoop added!');
            }, 0.5);
        };

        const dessert = new IceCream();
        dessert.addScoop();
      
       

        //3.箭头函数
        // constructor
           /*  function IceCream() {
                this.scoops = 0;
            }

            // adds scoop to ice cream
            IceCream.prototype.addScoop = function () {
                setTimeout(() => { // an arrow function is passed to setTimeout
                    this.scoops++;
                    console.log('scoop added!');
                }, 0.5);
            };

            const dessert = new IceCream();
            dessert.addScoop();
             console.log(dessert.scoops); //1 */
</script>
</html>